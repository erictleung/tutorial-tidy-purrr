---
title: "Using tidyverse to clean and manipulate data"
author: "Eric Leung"
date: "February 16th, 2017"
output:
  ioslides_presentation:
    highlight: pygments
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
```

## Tidyverse {.columns-2}

**Core Packages**

- `ggplot2` (graphics)
- `tibble` (data frames and tables)
- `tidyr` (make tidy)
- `readr` (read in formats)
- `purrr` (functional programming)
- `dplyr` (manipulate data)


<img src="./images/tidy-logos.png" style="height: auto; width: 100%">


## Workflow

![Data science exploration general workflow](./images/data-science-explore.png)


## Four Basic Principles to Tidyverse

1. Reuse existing data structures
2. Compose simple functions with the pipe
3. Embrace functional programming
4. Design for humans

**Source**:

https://cran.r-project.org/web/packages/tidyverse/vignettes/manifesto.html

## 1. Reuse existing data structures

- Re-use pre-existing data structures
- Many packages (e.g. ggplot2, dplyr) use rectangular data
- Use data frames or tibbles


## 2. Compose simple functions with the pipe

- The pipe character in R is `%>%`
- Functions should be "simple" and do one thing well
- Avoid mixing side-effects
    - Returns object OR
    - Side-effect i.e. changes the input data
- Function names should be verbs


## 3. Embrace functional programming

- R is a functional language
- Immutable objects == objects that don't change
- In other words, if you want to make changes, do a copy-on-modify
- Use tools that abstract out `for` loops e.g. apply methods or mapping


## 4. Design for humans

- Other people will read your code
- Be considerate of others reading your code
- Compute time is secondary to thinking time
- Things to do:
    - Invest time in good names
    - Be explicit and possibly long with names


## Tidyverse Part 1

- `broom` (convert statistical objects to tidy data)
- `dplyr` (easily tidy data)
- `forcats` (work with categorical variables)
- `ggplot2` (create elegant data visualizations)
- `haven` (import and export SPSS, Stata, and SAS)
- `httr` (work with URLs and HTTP)
- `hms` (pretty time of day)
- `jsonlite` (robust JSON parser)
- `lubridate` (deal with dates easier)

## Tidyverse Part 2

- `magrittr` (pipe) +
- `modelr` (modeling functions)
- `purrr` (functional programming)
- `readr` (read tabular data)
- `readxl` (read Excel data)
- `stringr` (manipulate strings)
- `tibble` (simple data frames)
- `rvest` (web scrapping tools)
- `tidyr` (easily tidy data)
- `xml2` (parse XML files)


## R for Data Science {.columns-2}

Website: http://r4ds.had.co.nz


<img src="./images/cover.png" style="height: 70%; width: 80%">


## Questions?

<img src="./images/rstudio-hex-purrr.png" style="height: auto; width: 25%">


## Resources

- https://jennybc.github.io/purrr-tutorial/index.html
- https://github.com/tidyverse/tidyverse
- https://cran.r-project.org/web/packages/tidyverse/vignettes/manifesto.html
